<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-1fa1d8026083a9bddc52b4aafc7f818e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<title>index</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #767676;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #767676;  padding-left: 4px; }
    div.sourceCode
      { color: #545454; background-color: #fefefe; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #545454; } /* Normal */
    code span.al { color: #7928a1; } /* Alert */
    code span.an { color: #696969; } /* Annotation */
    code span.at { color: #a55a00; } /* Attribute */
    code span.bn { color: #7928a1; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #d91e18; } /* ControlFlow */
    code span.ch { color: #008000; } /* Char */
    code span.cn { color: #d91e18; } /* Constant */
    code span.co { color: #696969; } /* Comment */
    code span.cv { color: #696969; font-style: italic; } /* CommentVar */
    code span.do { color: #696969; font-style: italic; } /* Documentation */
    code span.dt { color: #7928a1; } /* DataType */
    code span.dv { color: #7928a1; } /* DecVal */
    code span.er { color: #7928a1; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #a55a00; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #696969; } /* Information */
    code span.kw { color: #d91e18; } /* Keyword */
    code span.op { color: #00769e; } /* Operator */
    code span.ot { color: #d91e18; } /* Other */
    code span.pp { color: #7928a1; } /* Preprocessor */
    code span.sc { color: #00769e; } /* SpecialChar */
    code span.ss { color: #008000; } /* SpecialString */
    code span.st { color: #008000; } /* String */
    code span.va { color: #a55a00; } /* Variable */
    code span.vs { color: #008000; } /* VerbatimString */
    code span.wa { color: #696969; font-style: italic; } /* Warning */
  </style>
<link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-e211bcc46048f89098312a011de5edad.css">
<link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
<link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="title-slide" class="slide level2 center" data-menu-title="Title Slide" data-background="#355070"><h2></h2>
<p><span class="custom-title">Aprendizado Causal</span></p>
<p><span class="custom-subtitle"><em>Um Guia inicial</em></span></p>
<hr style="border: 1px solid #d2e3f3;">
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="custom-subtitle3">Beatriz Lima Silveira</span><br></p>
</div><div class="column" style="width:50%;">
<p><span class="custom-subtitle3">Universidade Federal do Espir√≠to Santo</span> <br><span class="custom-subtitle3">Laborat√≥rio de Data Science (DaSLab)</span> <br><span class="custom-subtitle3">R-Ladies + Vitoria</span></p>
</div></div>
<div style="text-align: center; margin-top: 20px;">
<p><span class="custom-subtitle3">Slides em: <a href="https://github.com/beatriz-ls/minicurso_introducao_inferencia_causal_rladies" class="uri">https://github.com/beatriz-ls/minicurso_introducao_inferencia_causal_rladies</a></span></p>
</div>
<p><br></p>
</section><section id="section" class="slide level2 title" data-background-image="img/profile.jpeg" data-background-size="35%" data-background-position="left 10% center" data-background-color="#FAF0F2"><h2></h2>
<div class="columns">
<div class="column" style="margin-left: 40%;">
<div class="custom-subtitle" style="color: #355070;">
<p>Sobre mim</p>
</div>
<p><br></p>
<ul>
<li>Meu nome √© <strong>Beatriz Lima Silveira</strong><br>
</li>
<li>24 anos</li>
<li>Finalista no curso de <strong>Estat√≠stica</strong> na <strong>Universidade Federal do Espirito Santo</strong> e membro <strong>R-Ladies Vit√≥ria</strong><br>
</li>
<li>Integrante do <strong>Laborat√≥rio de Ciencia de Dados (DaSLab)</strong><br>
</li>
<li>GitHub: <a href="https://github.com/beatriz-ls" class="uri">https://github.com/beatriz-ls</a><br>
</li>
<li>LinkedIn: <a href="https://www.linkedin.com/in/beatriz-ls/" class="uri">https://www.linkedin.com/in/beatriz-ls/</a>
</li>
</ul>
</div><div class="column" style="width:0%;">

</div></div>
</section><section id="topicos" class="slide level2" data-menu-title="T√≥picos"><h2></h2>
<p><span class="slide-title">T√≥picos</span></p>
<hr>
<div class="body-text-m">
<ul>
<li>Porque estudar Infer√™ncia Causal?</li>
<li>A Escada da Causalidade</li>
<li>O Modelo Causal</li>
<li>Entendendo Interven√ß√µes</li>
<li>Entendendo Contrafactuais</li>
<li>Hierarquia da informa√ß√£o</li>
<li>Materiais de estudo not√≥rios</li>
<li>Refer√™ncias</li>
</ul>
</div>
</section><section id="bibliotecas" class="slide level2" data-menu-title="Bibliotecas"><h2></h2>
<p><span class="slide-title">Bibliotecas</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"knitr"</span>)</span>
<span id="cb1-3"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dagitty"</span>)</span>
<span id="cb1-4"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"ggdag"</span>)</span>
<span id="cb1-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-6"><a href=""></a></span>
<span id="cb1-7"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-8"><a href=""></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-9"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb1-10"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb1-11"><a href=""></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="porque-estudar" class="slide level2" data-menu-title="Porque estudar Infer√™ncia Causal?"><h2></h2>
<p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson</span></p>
<hr>
<p>Observamos em 700 pacientes tr√™s vari√°veis bin√°rias:</p>
<ul>
<li>
<span class="math inline">\(T\)</span>: recebeu tratamento</li>
<li>
<span class="math inline">\(C\)</span>: curou</li>
<li>
<span class="math inline">\(Z\)</span>: vari√°vel bin√°ria que ser√° definida depois</li>
</ul>
<p>A tabela abaixo resume os dados:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<caption>Frequ√™ncia conjunta das vari√°veis <span class="math inline">\(Z\)</span>, <span class="math inline">\(T\)</span> e <span class="math inline">\(C\)</span>
</caption>
<thead><tr class="header">
<th style="text-align: right;">Z</th>
<th style="text-align: right;">T</th>
<th style="text-align: right;">N√£o Curou (C=0)</th>
<th style="text-align: right;">Curou (C=1)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">234</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">71</td>
<td style="text-align: right;">192</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p>An√°lise Estratificada</p>
</div>
</div>
<div class="columns">
<div class="column">
<div class="body-text-s">
<ul>
<li>Para <span class="math inline">\(Z = 0\)</span>: <span class="math display">\[ P(C=1 | T=1, Z=0) \approx \frac{81}{87} \approx 0.93 \]</span> <span class="math display">\[ P(C=1 | T=0, Z=0) \approx \frac{234}{270} \approx 0.87 \]</span>
</li>
<li>Para <span class="math inline">\(Z = 1\)</span>: <span class="math display">\[ P(C=1 | T=1, Z=1) \approx \frac{192}{263} \approx 0.73 \]</span> <span class="math display">\[ P(C=1 | T=0, Z=1) \approx \frac{55}{80} \approx 0.69 \]</span>
</li>
</ul>
</div>
</div><div class="column">
<div title="Conclus√£o">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Conclus√£o</strong></p>
</div>
<div class="callout-content">
<p>Para todos valores de <strong>Z</strong>, a taxa de recupera√ß√£o √© maior dentre aqueles que receberam tratamento do que sem ele.</p>
<p>Podemos afirmar que tratamento √© efetivo na recupera√ß√£o do paciente?</p>
</div>
</div>
</div>
</div>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p>An√°lise Agregada</p>
</div>
</div>
<div class="columns">
<div class="column">
<div class="body-text-s">
<ul>
<li>Tratamento:</li>
</ul>
<p><span class="math display">\[P(C = 1 \mid T = 1) = \frac{81 + 192}{6 + 81 + 192 + 71} \approx 0{,}78\]</span></p>
<ul>
<li>Sem Tratamento:</li>
</ul>
<p><span class="math display">\[P(C = 1 \mid T = 0) = \frac{234 + 55}{36 + 234 + 25 + 55} \approx 0{,}83\]</span></p>
</div>
</div><div class="column">
<div title="Conclus√£o">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Conclus√£o</strong></p>
</div>
<div class="callout-content">
<p>Sem estratificar por <span class="math inline">\(Z\)</span>, a frequ√™ncia de recupera√ß√£o √© maior entre aqueles que n√£o receberam o tratamento do que dentre aqueles que o receberam.</p>
</div>
</div>
</div>
</div>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p>Conflito nas Conclus√µes</p>
</div>
</div>
<div class="body-text-s">
<div class="columns">
<div class="column">
<p><span class="purple-text">Cen√°rio 1:</span> <strong>Z</strong> = Sexo</p>
<p><em>Z</em>: Indicadora de que o paciente √© homem</p>
<ul>
<li><p>Observa√ß√£o: Mais homens receberam o tratamento</p></li>
<li><p>Compara√ß√£o agregada: Homens tratados √ó Mulheres n√£o tratadas</p></li>
<li><p>Pode se assumir que, independente do tratamento, mulheres t√™m maior chance de recupera√ß√£o.</p></li>
<li><p>Taxa de recupera√ß√£o menor no grupo tratado √© explicada pelo sexo</p></li>
</ul>
<p>üìå Conclus√£o: Tratamento parece efetivo quando estratificamos por sexo.</p>
</div><div class="column">
<p><span class="purple-text">Cen√°rio 2:</span> <strong>Z</strong> = Press√£o Alta</p>
<ul>
<li><p>Z: Indicadora de que o paciente tem press√£o elevada</p></li>
<li><p>Sabemos que: Tratamento aumenta a press√£o como efeito colateral</p></li>
<li><p>Mais pacientes com press√£o alta est√£o no grupo tratado</p></li>
<li><p>Compara√ß√µes dentro dos grupos de press√£o: Tratamento parece ben√©fico porque n√£o h√° como captar o efeito colateral dentro de cada grupo. S√≥ √© captado o pequeno efeito positivo.</p></li>
<li><p>An√°lise agregada: Frequ√™ncia de recupera√ß√£o √© maior sem tratamento</p></li>
</ul>
<p>üìå Conclus√£o: Tratamento parece ineficiente devido ao efeito colateral.</p>
</div></div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">Simula√ß√£o de um caso geral</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># Simula√ß√£o de Confundimento em Estudo Observacional</span></span>
<span id="cb2-2"><a href=""></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span> </span>
<span id="cb2-3"><a href=""></a>dados_observacionais <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb2-4"><a href=""></a>  <span class="co"># Vari√°vel de confus√£o (ex: gravidade da doen√ßa)</span></span>
<span id="cb2-5"><a href=""></a>  <span class="at">gravidade_doenca =</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>),</span>
<span id="cb2-6"><a href=""></a>  </span>
<span id="cb2-7"><a href=""></a>  <span class="co"># Probabilidade de receber tratamento depende da gravidade</span></span>
<span id="cb2-8"><a href=""></a>  <span class="at">prob_tratamento =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-9"><a href=""></a>    gravidade_doenca <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="fl">0.75</span>,  <span class="co"># Casos graves: 75% chance de tratamento</span></span>
<span id="cb2-10"><a href=""></a>    gravidade_doenca <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="fl">0.25</span>   <span class="co"># Casos leves: 25% chance de tratamento</span></span>
<span id="cb2-11"><a href=""></a>  ),</span>
<span id="cb2-12"><a href=""></a>  </span>
<span id="cb2-13"><a href=""></a>  <span class="co"># Tratamento atribu√≠do (n√£o randomizado)</span></span>
<span id="cb2-14"><a href=""></a>  <span class="at">recebeu_tratamento =</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, prob_tratamento),</span>
<span id="cb2-15"><a href=""></a>  </span>
<span id="cb2-16"><a href=""></a>  <span class="co"># Desfecho: afetado pela gravidade + ru√≠do aleat√≥rio</span></span>
<span id="cb2-17"><a href=""></a>  <span class="at">resultado_saude =</span> gravidade_doenca <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb2-18"><a href=""></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>prob_tratamento)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">Simula√ß√£o de um caso geral</span></p>
<hr>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 √ó 3
   gravidade_doenca recebeu_tratamento resultado_saude
              &lt;int&gt;              &lt;int&gt;           &lt;dbl&gt;
 1                0                  0           0.920
 2                1                  1           3.15 
 3                1                  1           0.546
 4                0                  0          -1.41 
 5                0                  1          -0.286
 6                1                  1           1.51 
 7                1                  0           0.751
 8                1                  1           0.296
 9                0                  0          -0.764
10                1                  0           1.41 
# ‚Ñπ 990 more rows</code></pre>
</div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">Simula√ß√£o de um caso geral</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>model1 <span class="ot">&lt;-</span><span class="fu">lm</span>(resultado_saude <span class="sc">~</span> recebeu_tratamento, <span class="at">data =</span> dados_observacionais)</span>
<span id="cb4-2"><a href=""></a>model1<span class="sc">$</span>coef</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       (Intercept) recebeu_tratamento 
         0.2776988          0.5383836 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(resultado_saude <span class="sc">~</span> recebeu_tratamento <span class="sc">+</span> gravidade_doenca, <span class="at">data =</span> dados_observacionais)</span>
<span id="cb6-2"><a href=""></a>model2<span class="sc">$</span>coef</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       (Intercept) recebeu_tratamento   gravidade_doenca 
        0.02547917         0.04698668         0.96473992 </code></pre>
</div>
</div>
<div title="Conclus√£o">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Conclus√£o</strong></p>
</div>
<div class="callout-content">
<p><strong>Efeito da gravidade:</strong> 1.055 (muito forte)</p>
<p><strong>Efeito REAL do tratamento:</strong> apenas 0.028 (praticamente zero)</p>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Porque estudar Infer√™ncia Causal?</span></p>
<p><span class="custom-subtitle2">Simula√ß√£o de um caso geral</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a>dados_observacionais <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href=""></a>  <span class="fu">group_by</span>(recebeu_tratamento) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">media_resultado =</span> <span class="fu">mean</span>(resultado_saude))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  recebeu_tratamento media_resultado
               &lt;int&gt;           &lt;dbl&gt;
1                  0           0.278
2                  1           0.816</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>dados_observacionais <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href=""></a>  <span class="fu">group_by</span>(recebeu_tratamento) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">media_resultado =</span> <span class="fu">mean</span>(resultado_saude)) <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href=""></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb10-5"><a href=""></a>    <span class="at">names_from =</span> recebeu_tratamento, </span>
<span id="cb10-6"><a href=""></a>    <span class="at">values_from =</span> media_resultado,  </span>
<span id="cb10-7"><a href=""></a>    <span class="at">names_prefix =</span> <span class="st">"tratamento_"</span></span>
<span id="cb10-8"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">diferenca_media =</span> tratamento_1 <span class="sc">-</span> tratamento_0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 1
  diferenca_media
            &lt;dbl&gt;
1           0.538</code></pre>
</div>
</div>
</section><section id="escada" class="slide level2" data-menu-title="Escada da Causalidade"><h2></h2>
<p><span class="slide-title">Escada da Causalidade</span></p>
<hr>

<img data-src="img/escada.png" class="r-stretch"></section><section id="modelo-causal" class="slide level2" data-menu-title="O Modelo Causal"><h2></h2>
<p><span class="slide-title">O Modelo Causal</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Definimos</strong></p>
</div>
</div>
<p>Determinar rela√ß√µes causais entre vari√°veis √© essencial para determinar efeito de uma vari√°vel em outra.</p>
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Desafio</strong></p>
</div>
</div>
<p>Representar essas rela√ß√µes formalmente (matem√°ticamente)</p>
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Resposta</strong></p>
</div>
</div>
<p>Definir um Modelo Causal, definido por meio de <strong>Modelos Probabilisticos em Grafos</strong></p>
</section><section id="section-1" class="slide level2" data-menu-title="O Modelo Causal"><h2></h2>
<p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">Grafo Direcionado Ac√≠clico (DAG)</span></p>
<hr>
<div class="body-text-s">
<div class="sanchez-font">
<div class="purple-text">
<p>Defini√ß√£o</p>
</div>
</div>
<p>Um DAG √© um grafo direcionado tal que, para todo v√©rtice, <strong>V</strong> , n√£o √© poss√≠vel seguir setas partindo de <strong>V</strong> e voltar para <strong>V</strong>.</p>
<ul>
<li>Representa√ß√£o causal: <span class="math inline">\(V_1 \rightarrow V_2\)</span> = ‚Äú<span class="math inline">\(V_1\)</span> causa <span class="math inline">\(V_2\)</span>‚Äù</li>
</ul>
<div class="sanchez-font">
<div class="purple-text">
<p>Lema</p>
</div>
</div>
<p>O conjunto de pais de <span class="math inline">\(\mathcal{V} \subseteq V\)</span> em um DAG, <span class="math inline">\(G = (V, \mathcal{E})\)</span>, √©: <span class="math display">\[
Pa(\mathcal{V}) := \{V^* \in V : \exists V \in \mathcal{V} \text{ tal que } (V^*, V) \in \mathcal{E}\}
\]</span></p>
<div class="sanchez-font">
<div class="purple-text">
<p>Lema</p>
</div>
</div>
<p>Em um DAG, <span class="math inline">\(G = (V, E)\)</span>, o conjunto de ancestrais de <span class="math inline">\(\mathcal{V} \subseteq V\)</span>, <span class="math inline">\(\operatorname{Anc}(\mathcal{V})\)</span>, √© tal que: <span class="math display">\[
\operatorname{Anc}(\mathcal{V}) \subseteq V \quad \text{e} \quad V^* \in \operatorname{Anc}(\mathcal{V}) \text{ se e somente se}
\]</span></p>
<p><span class="math display">\[
\exists V \in \mathcal{V} \text{ e um caminho direcionado } C \text{ tal que } C_1 = V^* \text{ e } C_i = V.
\]</span></p>
</div>
</section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">Modelo Probabil√≠stico em um DAG</span></p>
<hr>
<div class="body-text-s">
<div class="sanchez-font">
<div class="purple-text">
<p>Defini√ß√£o</p>
</div>
</div>
<p>Para <span class="math inline">\(\mathcal{V}\)</span> um conjunto de vari√°veis aleat√≥rias, dizemos que uma fun√ß√£o de densidade sobre <span class="math inline">\(\mathcal{V}\)</span>, <span class="math inline">\(f\)</span>, √© compat√≠vel com um DAG, <span class="math inline">\(\mathcal{G}\)</span>, se:</p>
<p><span class="math display">\[
f(v_1,\ldots,v_n) = \prod_{i=1}^n f(v_i \mid \mathrm{Pa}(v_i))
\]</span></p>
<div class="sanchez-font">
<div class="purple-text">
<p>Lema</p>
</div>
</div>
<p>Uma fun√ß√£o de densidade <span class="math inline">\(f\)</span> √© compat√≠vel com um DAG <span class="math inline">\(\mathcal{G}\)</span> se e somente se existem fun√ß√µes <span class="math inline">\(g_1, \dots, g_n\)</span> tais que:</p>
<p><span class="math display">\[
f(v_1, \dots, v_n) = \prod_{i=1}^{n} g_i(v_i, \mathrm{Pa}(v_i)), \quad \text{e}
\]</span></p>
<p><span class="math display">\[
\int g_i(v_i, \mathrm{Pa}(v_i)) \, dv_i = 1 \quad \forall i
\]</span></p>
</div>
</section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">Cadeia (Chain)</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-1-1">Output</a></li>
<li><a href="#tabset-1-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20chain%20img-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb12-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb12-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-4"><a href=""></a></span>
<span id="cb12-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb12-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb12-7"><a href=""></a><span class="st">V1 -&gt; V2</span></span>
<span id="cb12-8"><a href=""></a><span class="st">V2 -&gt; V3</span></span>
<span id="cb12-9"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb12-10"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb12-11"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-13"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-14"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-15"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb12-16"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p>Observa√ß√µes</p>
</div>
</div>
<div class="hr-purple">

</div>
<ul>
<li><p><span class="math inline">\(V_1\)</span> √© causa de <span class="math inline">\(V_2\)</span> que, por sua vez, √© causa de <span class="math inline">\(V_3\)</span>. Assim, <span class="math inline">\(V_1\)</span> √© ancestral de <span class="math inline">\(V_3\)</span>, isto √©, o primeiro √© a causa indireta do segundo;</p></li>
<li><p><span class="math inline">\(V_1\)</span> e <span class="math inline">\(V_3\)</span> est√£o correlacionados, via <span class="math inline">\(V_2\)</span>, na popula√ß√£o;</p></li>
<li><p><span class="math inline">\(V_1\)</span> e <span class="math inline">\(V_3\)</span> s√£o independentes quando condicionados em <span class="math inline">\(V_2\)</span></p></li>
</ul>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">Confundidor (Confounder)</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-2-1">Output</a></li>
<li><a href="#tabset-2-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20confounder-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb13-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb13-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-4"><a href=""></a></span>
<span id="cb13-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb13-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb13-7"><a href=""></a><span class="st">V1 -&gt; V2</span></span>
<span id="cb13-8"><a href=""></a><span class="st">V1 -&gt; V3</span></span>
<span id="cb13-9"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb13-10"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb13-11"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb13-12"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-13"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-14"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-15"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb13-16"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p>Observa√ß√µes</p>
</div>
</div>
<div class="hr-purple">

</div>
<ul>
<li><p><span class="math inline">\(V_1\)</span> √© uma causa comum a <span class="math inline">\(V_2\)</span> e a <span class="math inline">\(V_3\)</span>;</p></li>
<li><p><span class="math inline">\(V_2\)</span> e <span class="math inline">\(V_3\)</span> est√£o correlacionados, via <span class="math inline">\(V_1\)</span>, na popula√ß√£o;</p></li>
<li><p><span class="math inline">\(V_2\)</span> e <span class="math inline">\(V_3\)</span> s√£o independentes quando condicionados em <span class="math inline">\(V_1\)</span>.</p></li>
</ul>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">Colisor (Collider)</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-3-1">Output</a></li>
<li><a href="#tabset-3-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20colisor%20img-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb14-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb14-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb14-4"><a href=""></a></span>
<span id="cb14-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb14-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb14-7"><a href=""></a><span class="st">V1 -&gt; V2</span></span>
<span id="cb14-8"><a href=""></a><span class="st">V3 -&gt; V2</span></span>
<span id="cb14-9"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb14-10"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb14-11"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb14-12"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-13"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-14"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-15"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb14-16"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p>Observa√ß√µes</p>
</div>
</div>
<div class="hr-purple">

</div>
<ul>
<li><p><span class="math inline">\(V_1\)</span> e <span class="math inline">\(V_3\)</span> s√£o causas comum a <span class="math inline">\(V_2\)</span>;</p></li>
<li><p><span class="math inline">\(V_1\)</span> e <span class="math inline">\(V_3\)</span> s√£o independentes na popula√ß√£o;</p></li>
<li><p><span class="math inline">\(V_1\)</span> e <span class="math inline">\(V_3\)</span> est√£o correlacionados quando condicionados em <span class="math inline">\(V_2\)</span>.</p></li>
</ul>
</div></div>
</section><section class="slide level2"><div class="fullscreen-colored">
<p>D-separa√ß√£o</p>
</div>
</section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">D-separa√ß√£o</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p>Objetivo</p>
</div>
</div>
<p>A D-separa√ß√£o √© uma regra formal para determinar, a partir do DAG, quando dois conjuntos de vari√°veis (X e Y) s√£o independentes condicionalmente em um terceiro conjunto (Z).</p>
<div class="sanchez-font">
<div class="purple-text">
<p>Regra Geral</p>
</div>
</div>
<p>Um caminho entre X e Y est√° bloqueado por Z se o caminho conter:</p>
<ul>
<li><p>Um n√£o-colisor que est√° sendo condicionado, OU</p></li>
<li><p>Um colisor que N√ÉO est√° sendo condicionado (nem seus descendentes)</p></li>
</ul>
<aside class="notes"><p>Regras de Bloqueio: - N√£o-colisor: Bloqueia quando condicionado - Colisor: Bloqueia quando N√ÉO condicionado</p>
<p>Li√ß√£o Principal: Condicionar em colisor pode INTRODUZIR depend√™ncia onde n√£o existia! Isso √© contra-intuitivo mas fundamental em causalidade.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">D-separa√ß√£o: Exemplo</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-4-1">Output</a></li>
<li><a href="#tabset-4-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20dseparacao%20exemplo%20output-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb15-2"><a href=""></a>grafo_exemplo <span class="ot">&lt;-</span><span class="fu">dagitty</span>(<span class="st">'dag {</span></span>
<span id="cb15-3"><a href=""></a><span class="st">    V1 -&gt; V2 &lt;- V4</span></span>
<span id="cb15-4"><a href=""></a><span class="st">    V2 -&gt; V3 &lt;- V4</span></span>
<span id="cb15-5"><a href=""></a><span class="st">}'</span>)</span>
<span id="cb15-6"><a href=""></a></span>
<span id="cb15-7"><a href=""></a><span class="co"># Visualizando</span></span>
<span id="cb15-8"><a href=""></a><span class="fu">ggdag</span>(grafo_exemplo) <span class="sc">+</span> <span class="fu">theme_dag</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p>D√∫vidas</p>
</div>
</div>
<div class="hr-purple">
<ol type="1">
<li>V1 e V3 s√£o d-separados marginalmente?</li>
<li>V1 e V3 s√£o d-separados dado V2?</li>
<li>V1 e V3 s√£o d-separados dado V2 e V4?</li>
</ol>
</div>
</div></div>
<aside class="notes"><ol type="1">
<li>V1 e V3 s√£o d-separados marginalmente? N√£o Existem caminhos ativos:</li>
</ol>
<ul>
<li>Caminho 1: V1 ‚Üí V2 ‚Üí V3 (V2 n√£o √© colisor, caminho ativo)</li>
<li>Caminho 2: V1 ‚Üí V2 ‚Üê V4 ‚Üí V3 (V2 √© colisor, mas n√£o estamos condicionando nele ‚Üí bloqueado) Como um caminho est√° ativo, N√ÉO s√£o d-separados.</li>
</ul>
<ol start="2" type="1">
<li>V1 e V3 s√£o d-separados dado V2? N√ÉO Agora o segundo caminho se torna ativo:</li>
</ol>
<ul>
<li>Caminho 1: V1 ‚Üí V2 ‚Üí V3 (V2 n√£o √© colisor, condicionamos nele ‚Üí bloqueado ‚úì)</li>
<li>Caminho 2: V1 ‚Üí V2 ‚Üê V4 ‚Üí V3 (V2 √© colisor, condicionamos nele ‚Üí ATIVO ‚úó) Condicionar em colisor ABRE o caminho!</li>
</ul>
<ol start="3" type="1">
<li>V1 e V3 s√£o d-separados dado V2 e V4?SIM Ambos os caminhos bloqueados:</li>
</ol>
<ul>
<li>Caminho 1: V1 ‚Üí V2 ‚Üí V3 (V2 n√£o √© colisor, condicionamos ‚Üí bloqueado ‚úì)</li>
<li>Caminho 2: V1 ‚Üí V2 ‚Üê V4 ‚Üí V3 (V4 n√£o √© colisor, condicionamos ‚Üí bloqueado ‚úì) Todos os caminhos bloqueados!</li>
</ul>
<p>Implica√ß√µes Pr√°ticas:</p>
<p>Se voc√™ quer estudar o efeito de V1 em V3: - N√£o condicione apenas em V2 (introduz vi√©s!) - Condicione em V2 E V4 para bloquear todos os caminhos</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section class="slide level2"><p><span class="slide-title">O Modelo Causal</span></p>
<p><span class="custom-subtitle2">D-separa√ß√£o: Exemplo no R</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb16-2"><a href=""></a></span>
<span id="cb16-3"><a href=""></a><span class="co"># PERGUNTA 1: V1 e V3 s√£o d-separados marginalmente?</span></span>
<span id="cb16-4"><a href=""></a><span class="fu">dseparated</span>(grafo_exemplo, <span class="st">"V1"</span>, <span class="st">"V3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># PERGUNTA 2: V1 e V3 s√£o d-separados dado V2?</span></span>
<span id="cb18-2"><a href=""></a><span class="fu">dseparated</span>(grafo_exemplo, <span class="st">"V1"</span>, <span class="st">"V3"</span>, <span class="st">"V2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="co"># PERGUNTA 3: V1 e V3 s√£o d-separados dado V2 e V4?</span></span>
<span id="cb20-2"><a href=""></a><span class="fu">dseparated</span>(grafo_exemplo, <span class="st">"V1"</span>, <span class="st">"V3"</span>, <span class="fu">c</span>(<span class="st">"V2"</span>, <span class="st">"V4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># Isso mostra TODAS as rela√ß√µes de independ√™ncia que o grafo implica</span></span>
<span id="cb22-2"><a href=""></a><span class="fu">impliedConditionalIndependencies</span>(grafo_exemplo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>V1 _||_ V3 | V2, V4
V1 _||_ V4</code></pre>
</div>
</div>
</section><section id="intervencoes" class="slide level2" data-menu-title="Entendendo Interven√ß√µes"><h2></h2>
<p><span class="slide-title">Entendendo Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson: Cen√°rio 1 (Z = Sexo)</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-5-1">Output</a></li>
<li><a href="#tabset-5-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20exemplo%20img%20z_sexo-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb24-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb24-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-4"><a href=""></a></span>
<span id="cb24-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb24-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb24-7"><a href=""></a><span class="st">T -&gt; C</span></span>
<span id="cb24-8"><a href=""></a><span class="st">Z -&gt; C</span></span>
<span id="cb24-9"><a href=""></a><span class="st">Z -&gt; T</span></span>
<span id="cb24-10"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb24-11"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb24-12"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb24-13"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-14"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-15"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-16"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb24-17"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="red-text">
<p>Observa√ß√µes</p>
</div>
</div>
<div class="hr-red">

</div>
<ul>
<li><p>Z √© uma causa tanto de T quanto de C;</p></li>
<li><p>T √© uma causa de C</p></li>
</ul>
</div></div>
</section><section id="intervencoes" class="slide level2" data-menu-title="Entendendo Interven√ß√µes"><h2></h2>
<p><span class="slide-title">Entendendo Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">O Paradoxo de Simpson: Cen√°rio 2 (Z = Press√£o Alta)</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-6-1">Output</a></li>
<li><a href="#tabset-6-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20exemplo%20img%20z_pressao-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb25-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb25-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb25-4"><a href=""></a></span>
<span id="cb25-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb25-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb25-7"><a href=""></a><span class="st">T -&gt; C</span></span>
<span id="cb25-8"><a href=""></a><span class="st">Z -&gt; C</span></span>
<span id="cb25-9"><a href=""></a><span class="st">T -&gt; Z</span></span>
<span id="cb25-10"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb25-11"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb25-12"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb25-13"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-14"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-15"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-16"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb25-17"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="red-text">
<p>Observa√ß√µes</p>
</div>
</div>
<div class="hr-red">

</div>
<ul>
<li><p>T √© uma causa tanto de Z quanto de C;</p></li>
<li><p>Z √© uma causa de C</p></li>
</ul>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">Entendendo Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Observa√ß√£o vs Interven√ß√£o</span></p>
<hr>
<div class="sanchez-font">
<div class="red-text">
<p>Qual √© a probabilidade de que um indiv√≠duo selecionado aleatoriamente da popula√ß√£o se cure dado que <strong>observamos</strong> que recebeu o tratamento?</p>
</div>
</div>
<div class="body-text-s">
<ul>
<li><p>Corresponde: <span class="math inline">\(f(C \mid T)\)</span></p></li>
<li>
<p>Capta:</p>
<ul>
<li>Efeito direto: <span class="math inline">\(T \rightarrow C\)</span>;</li>
<li>Efeito indireto via <strong>Z</strong> (Confundidor);</li>
</ul>
</li>
<li><p>Calculando:</p></li>
</ul>
<p><span class="math display">\[
\begin{equation}
\begin{aligned}
f(c|t) &amp;= \sum_{z} f(z, c|t) \\
&amp;= \sum_{z} \frac{f(z, c, t)}{f(z)} \\
&amp;= \sum_{z} \frac{f(z, c)f(c|z, t)}{f(t)} \\
&amp;= \sum_{z} f(z|t)f(c|z, t)
\end{aligned}
\end{equation}
\]</span></p>
</div>
</section><section class="slide level2"><p><span class="slide-title">Entendendo Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Observa√ß√£o vs Interven√ß√£o</span></p>
<hr>
<div class="sanchez-font">
<div class="red-text">
<p>Qual a probabilidade de que um indiv√≠duo selecionado aleatoriamente da popula√ß√£o se cure dado que <strong>prescrevemos</strong> a ele o tratamento?</p>
</div>
</div>
<ul>
<li>Ignora: <span class="math inline">\(Z \rightarrow T\)</span>
</li>
<li>Calculando:</li>
</ul>
<p><span class="math display">\[
f(c \mid do(t = 1)) = \sum_{z} f(z) f(c \mid z, t = 1)
\]</span></p>
</section><section class="slide level2"><div class="fullscreen-colored">
<p>O Problema Fundamental da Infer√™ncia Causal</p>
</div>
</section><section class="slide level2"><p><span class="slide-title">Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">O Problema Fundamental da Infer√™ncia Causal</span></p>
<hr>
<div class="slide" style="font-size: 0.85em;">
<div class="columns">
<div class="column" style="width:50%;">
<div class="sanchez-font purple-text">
<p><strong>Dados de experimentos completamente randomizados</strong></p>
</div>
<p>Podemos realmente fazer:<br>
- <code>do(T=1)</code> em grupo aleat√≥rio<br>
- <code>do(T=0)</code> em outro grupo<br>
- Comparar resultados<br></p>
<p><strong>Temos acesso direto</strong> a <span class="math inline">\(E[C | do(T=t)]\)</span></p>
</div><div class="column" style="width:50%;">
<div class="sanchez-font purple-text">
<p><strong>Dados Observacionais</strong></p>
</div>
<p>Apenas observamos: &nbsp;</p>
<ul>
<li><p><span class="math inline">\(E[C | T=1]\)</span> (quem escolheu tratar) &nbsp;</p></li>
<li><p><span class="math inline">\(E[C | T=0]\)</span> (quem escolheu n√£o tratar)<br></p></li>
</ul>
<p><strong>Mas</strong>: <span class="math inline">\(E[C | T=t] \neq E[C | do(T=t)]\)</span></p>
</div></div>
<div title="Solu√ß√£o">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Solu√ß√£o</strong></p>
</div>
<div class="callout-content">
<p><code>Problema:</code> Vari√°vel Z afeta tanto T quanto C, assim:</p>
<p><span class="math inline">\(E[C | T=1]\)</span> = <span class="math display">\[E[C | do(T=1)] + \text{V√≠es de confus√£o} \]</span></p>
<p><code>Solu√ß√£o</code>: Condicionando em Vari√°veis de Confus√£o</p>
<p><span class="math display">\[E[C \mid do(T=t)] = \sum_{z} E[C \mid T=t, Z=z] \cdot P(Z=z)\]</span></p>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Efeito Causal M√©dio</span></p>
<hr>
<p><span class="math display">\[
ACE =
\begin{cases}
E[Y \mid do(X=1)] - E[Y \mid do(X=0)], &amp; \text{se } X \text{ √© bin√°rio}, \\
\dfrac{\partial}{\partial x} E[Y \mid do(X=x)], &amp; \text{se } X \text{ √© cont√≠nuo}.
\end{cases}
\]</span></p>
</section><section class="slide level2"><p><span class="slide-title">Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Efeito Causal M√©dio: Paradoxo de Simpson</span></p>
<hr>
<div class="body-text-s">
<p><strong>Retomando os c√°lculos do exemplo:</strong></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="math display">\[\mathbb{P}(Z = 1) = \frac{25 + 55 + 71 + 192}{700} \approx 0.49\]</span></p>
<p><span class="math display">\[\mathbb{P}(Z = 0) = 1 - \mathbb{P}(Z = 1) \approx 0.51\]</span></p>
<p><span class="math display">\[\mathbb{P}(Z = 1|T = 0) = \frac{25 + 55}{25 + 55 + 36 + 234} \approx 0.23\]</span></p>
<p><span class="math display">\[\mathbb{P}(Z = 1|T = 1) = \frac{71 + 192}{71 + 192 + 6 + 81} \approx 0.75\]</span></p>
</div><div class="column" style="width:50%;">
<p><span class="math display">\[\mathbb{P}(C = 1|T = 0, Z = 0) = \frac{234}{234 + 36} \approx 0.87\]</span></p>
<p><span class="math display">\[\mathbb{P}(C = 1|T = 1, Z = 0) = \frac{81}{81 + 6} \approx 0.93\]</span></p>
<p><span class="math display">\[\mathbb{P}(C = 1|T = 0, Z = 1) = \frac{55}{25 + 55} \approx 0.69\]</span></p>
<p><span class="math display">\[\mathbb{P}(C = 1|T = 1, Z = 1) = \frac{192}{71 + 192} \approx 0.73\]</span></p>
</div></div>
</div>
</section><section class="slide level2"><p><span class="slide-title">Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Efeito Causal M√©dio: Cen√°rio 1 (Z = Sexo)</span></p>
<hr>
<div class="body-text-s">
<p><span class="math display">\[\mathbb{P}_1(C = i, Z = j|do(T = k)) = \mathbb{P}(Z = j)\mathbb{P}(C = i|T = k, Z = j)\]</span></p>
<p>Assim,</p>
<p><span class="math display">\[\mathbb{P}_1(C = 1|do(T = 1)) = \mathbb{P}_1(C = 1, Z = 0|do(T = 1)) + \mathbb{P}_1(C = 1, Z = 1|do(T = 1))
\approx 0.83\]</span></p>
<p><span class="math display">\[\mathbb{P}_1(C = 1|do(T = 0)) = \mathbb{P}_1(C = 1, Z = 0|do(T = 0)) + \mathbb{P}_1(C = 1, Z = 1|do(T = 0))
\approx 0.78\]</span></p>
<p>Calculando:</p>
<p><span class="math display">\[
ACE = E[C \mid do(T = 1)] - E[C \mid do(T = 0)]
= P(C = 1 \mid do(T = 1)) - P(C = 1 \mid do(T = 0)) \approx 0.05
\]</span></p>
</div>
</section><section class="slide level2"><p><span class="slide-title">Interven√ß√µes</span></p>
<p><span class="custom-subtitle2">Efeito Causal M√©dio: Cen√°rio 2 (Z = Press√£o Alta)</span></p>
<hr>
<div class="body-text-s">
<p><span class="math display">\[
P_2(C = i, Z = j \mid do(T = k)) = P(Z = j \mid T = k)P(C = i \mid T = k, Z = j)
\]</span> Assim,</p>
<p><span class="math display">\[
\mathbb{P}_2(C = 1 \mid do(T = 1)) = \mathbb{P}_2(C = 1, Z = 0 \mid do(T = 1)) + \mathbb{P}_2(C = 1, Z = 1 \mid do(T = 1)) \approx 0.78
\]</span></p>
<p><span class="math display">\[
\mathbb{P}_2(C = 1 \mid do(T = 0)) = \mathbb{P}_2(C = 1, Z = 0 \mid do(T = 0)) + \mathbb{P}_2(C = 1, Z = 1 \mid do(T = 0)) \approx 0.83
\]</span> Calculando:</p>
<p><span class="math display">\[
ACE = E[C \mid do(T = 1)] - E[C \mid do(T = 0)]
= P_2(C = 1 \mid do(T = 1)) - P_2(C = 1 \mid do(T = 0)) \approx -0.05
\]</span></p>
</div>
</section><section class="slide level2"><div class="fullscreen-colored">
<p>Okay, mas como selecionar quais vari√°veis<br>
condicionar para calcular o t√£o querido ATE?</p>
</div>
</section><section id="backdoor" class="slide level2" data-menu-title="&quot;Identifica√ß√£o"><h2></h2>
<p><span class="slide-title">Identifica√ß√£o causal</span></p>
<p><span class="custom-subtitle2">Crit√©rio Backdoor</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Defini√ß√£o</strong></p>
</div>
</div>
<p>Caminho backdoor ou caminho de porta dos fundos √© qualquer caminho <strong>n√£o causal</strong> entre X(Tratamento) e Y(Resultado):<br></p>
<ul>
<li><p>N√£o √© o caminho de interesse, pois n√£o demonstra a <strong>real associa√ß√£o</strong> entre X e Y<br></p></li>
<li><p>Pode conter <strong>confundidores</strong><br></p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Exemplo</strong></p>
</div>
</div>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-7-1">Output</a></li>
<li><a href="#tabset-7-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/rdag%20exemplo%20backdoor%20output-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>backdoor_dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb26-2"><a href=""></a>  Y <span class="sc">~</span> X <span class="sc">+</span> Z,</span>
<span id="cb26-3"><a href=""></a>  X <span class="sc">~</span> Z,</span>
<span id="cb26-4"><a href=""></a>  <span class="at">exposure =</span> <span class="st">"X"</span>,</span>
<span id="cb26-5"><a href=""></a>  <span class="at">outcome =</span> <span class="st">"Y"</span></span>
<span id="cb26-6"><a href=""></a>)</span>
<span id="cb26-7"><a href=""></a></span>
<span id="cb26-8"><a href=""></a><span class="fu">ggdag</span>(backdoor_dag, <span class="at">node_size =</span> <span class="dv">14</span>) <span class="sc">+</span> </span>
<span id="cb26-9"><a href=""></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span></span>
<span id="cb26-10"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Caminho Backdoor: X ‚Üê Z ‚Üí Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div></div>
<aside class="notes"><p>Um conjunto Z satisfaz o crit√©rio backdoor se:</p>
<ul>
<li>Nenhum elemento de Z √© descendente de X (X ‚àâ Anc(Z))</li>
<li>Z bloqueia todos os caminhos backdoor entre X e Y</li>
<li>Todo caminho que come√ßa com X ‚Üê ‚Ä¶ est√° bloqueado dado Z</li>
</ul><style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="backdoor" class="slide level2" data-menu-title="&quot;Identifica√ß√£o"><h2></h2>
<p><span class="slide-title">Identifica√ß√£o causal</span></p>
<p><span class="custom-subtitle2">Crit√©rio Backdoor: Exemplo</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Cen√°rio</strong></p>
</div>
</div>
<p>Ser√° que caf√© causa c√¢ncer de pulm√£o?</p>
<p><strong>Vari√°veis:</strong><br></p>
<ul>
<li><p>Coffee: Consumo de caf√©<br></p></li>
<li><p>Cancer: C√¢ncer de pulm√£o<br></p></li>
<li><p>Smoking: Tabagismo<br></p></li>
<li><p>Addictive: Comportamento viciante<br></p></li>
</ul>
<p><strong>Hip√≥tese:</strong> Comportamento viciante √© confundidor!</p>
</section><section id="backdoor" class="slide level2" data-menu-title="&quot;Identifica√ß√£o"><h2></h2>
<p><span class="slide-title">Identifica√ß√£o causal</span></p>
<p><span class="custom-subtitle2">Crit√©rio Backdoor: Exemplo</span></p>
<hr>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-8-1">Code DAG</a></li>
<li><a href="#tabset-8-2">DAG</a></li>
<li><a href="#tabset-8-3">Code Caminhos Backdoor</a></li>
<li><a href="#tabset-8-4">Caminhos Backdoor</a></li>
<li><a href="#tabset-8-5">Code Adjustments</a></li>
<li><a href="#tabset-8-6">Caminhos Adjustments</a></li>
</ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>coffee_cancer_dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb27-2"><a href=""></a>  cancer <span class="sc">~</span> smoking,</span>
<span id="cb27-3"><a href=""></a>  smoking <span class="sc">~</span> addictive,</span>
<span id="cb27-4"><a href=""></a>  coffee <span class="sc">~</span> addictive,</span>
<span id="cb27-5"><a href=""></a>  <span class="at">exposure =</span> <span class="st">"coffee"</span>,</span>
<span id="cb27-6"><a href=""></a>  <span class="at">outcome =</span> <span class="st">"cancer"</span>,</span>
<span id="cb27-7"><a href=""></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb27-8"><a href=""></a>    <span class="st">"coffee"</span> <span class="ot">=</span> <span class="st">"Coffee"</span>, </span>
<span id="cb27-9"><a href=""></a>    <span class="st">"cancer"</span> <span class="ot">=</span> <span class="st">"Lung Cancer"</span>, </span>
<span id="cb27-10"><a href=""></a>    <span class="st">"smoking"</span> <span class="ot">=</span> <span class="st">"Smoking"</span>, </span>
<span id="cb27-11"><a href=""></a>    <span class="st">"addictive"</span> <span class="ot">=</span> <span class="st">"Addictive </span><span class="sc">\n</span><span class="st">Behavior"</span></span>
<span id="cb27-12"><a href=""></a>  )</span>
<span id="cb27-13"><a href=""></a>)</span>
<span id="cb27-14"><a href=""></a></span>
<span id="cb27-15"><a href=""></a><span class="fu">ggdag</span>(coffee_cancer_dag, <span class="at">text =</span> <span class="cn">FALSE</span>, <span class="at">use_labels =</span> <span class="st">"label"</span>) <span class="sc">+</span></span>
<span id="cb27-16"><a href=""></a>  <span class="fu">theme_dag</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/coffee-cancer-dag-output-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-3">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>coffee_cancer_dag <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href=""></a>  <span class="fu">ggdag_paths</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-4">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/coffee-cancer-dag-path-ouput-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-5">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a><span class="fu">ggdag_adjustment_set</span>(</span>
<span id="cb29-2"><a href=""></a>  coffee_cancer_dag, </span>
<span id="cb29-3"><a href=""></a>  <span class="at">use_labels =</span> <span class="st">"label"</span>, </span>
<span id="cb29-4"><a href=""></a>  <span class="at">text =</span> <span class="cn">FALSE</span></span>
<span id="cb29-5"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-6">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/coffee-cancer-adjustments-ouput-1.png" class="quarto-figure quarto-figure-center" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<aside class="notes"><p>dag_paths() - An√°lise de Caminhos: O resultado mostra apenas 1 caminho entre Coffee e Lung Cancer: text Coffee ‚Üê Addictive Behavior ‚Üí Smoking ‚Üí Lung Cancer Status: ‚Äúopen path‚Äù ‚Üí caminho ABERTO (n√£o bloqueado) Isso significa que h√° fluxo de informa√ß√£o esp√∫ria via Addictive Behavior 2. ggdag_adjustment_set() - Solu√ß√µes: A fun√ß√£o identificou DOIS conjuntos de ajuste v√°lidos: Op√ß√£o 1: Ajustar por {addictive} Bloqueia: Coffee ‚Üê Addictive Behavior ‚Üí Smoking ‚Üí Lung Cancer Remove o confundidor na raiz Op√ß√£o 2: Ajustar por {smoking} Bloqueia: Coffee ‚Üê Addictive Behavior ‚Üí Smoking ‚Üí Lung Cancer Remove o efeito do mediador/consequ√™ncia O que Significa na Pr√°tica: SEM ajuste: Voc√™ v√™ associa√ß√£o esp√∫ria entre caf√© e c√¢ncer porque: Pessoas com comportamento viciante ‚Üí bebem mais caf√© + fumam mais ‚Üí desenvolvem c√¢ncer O modelo atribui erroneamente o efeito do fumo ao caf√© COM ajuste (qualquer uma das op√ß√µes): Voc√™ isola o efeito real do caf√© Remove o vi√©s do comportamento viciante A associa√ß√£o observada se aproxima do efeito causal real Por que Duas Op√ß√µes? Ambas funcionam porque: Addictive Behavior √© o confundidor raiz Smoking √© o mecanismo atrav√©s do qual o confundidor opera Controlar qualquer um dos dois quebra o caminho esp√∫rio</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="contrafactuais" class="slide level2" data-menu-title="Contrafactuais"><h2></h2>
<p><span class="slide-title">Introduzindo Contrafactuais</span></p>
<p><span class="custom-subtitle2">Indaga√ß√µes Contrafactuais</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby">
<li><a data-tabby-default="" href="#tabset-9-1">Output</a></li>
<li><a href="#tabset-9-2">C√≥digo</a></li>
</ul>
<div class="tab-content">
<div id="tabset-9-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="index_files/figure-revealjs/dag%20contrafactuais%20img-1.png" class="quarto-figure quarto-figure-center" width="480"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="fu">library</span>(dagitty)</span>
<span id="cb30-2"><a href=""></a><span class="fu">library</span>(ggdag)</span>
<span id="cb30-3"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb30-4"><a href=""></a></span>
<span id="cb30-5"><a href=""></a><span class="co"># Construindo o Grafo</span></span>
<span id="cb30-6"><a href=""></a>grafo <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">"dag {</span></span>
<span id="cb30-7"><a href=""></a><span class="st">T -&gt; C</span></span>
<span id="cb30-8"><a href=""></a><span class="st">Z -&gt; C</span></span>
<span id="cb30-9"><a href=""></a><span class="st">Z -&gt; T</span></span>
<span id="cb30-10"><a href=""></a><span class="st">}"</span>)</span>
<span id="cb30-11"><a href=""></a><span class="co"># Exibir a figura do grafo</span></span>
<span id="cb30-12"><a href=""></a><span class="fu">ggdag</span>(grafo, <span class="at">layout =</span> <span class="st">"circle"</span>) <span class="sc">+</span></span>
<span id="cb30-13"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-14"><a href=""></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-15"><a href=""></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-16"><a href=""></a>        <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb30-17"><a href=""></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="vertical-center">
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Pergunta</strong></p>
</div>
</div>
<div class="sanchez-font">
<div class="red-text">
<p>Entre as pessoas tratadas e curadas, seria mais comum curar ou n√£o curar caso elas n√£o tivessem sido tratadas?</p>
</div>
</div>
</div>
</div></div>
</section><section id="contrafactuais" class="slide level2" data-menu-title="Contrafactuais"><h2></h2>
<p><span class="slide-title">Introduzindo Contrafactuais</span></p>
<p><span class="custom-subtitle2">Raciocinio Contrafactual vs Raciocinio Intervencional</span></p>
<hr>
<div class="vertical-center">
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Contrafactual</strong></p>
</div>
</div>
<p>Entre as pessoas tratadas e curadas, seria mais comum curar ou n√£o curar caso elas n√£o tivessem sido tratadas?</p>
<div class="sanchez-font">
<div class="purple-text">
<p><strong>Interven√ß√£o</strong></p>
</div>
</div>
<p>Entre pessoas tratadas, seria mais comum curar ou n√£o curar?</p>
</div>
</section><section id="contrafactuais" class="slide level2" data-menu-title="Contrafactuais"><h2></h2>
<p><span class="slide-title">Contrafactuais</span></p>
<p><span class="custom-subtitle2">Pondera√ß√£o pelo Inverso da Probabilidade de Tratamento (IPW)</span></p>
<hr>
<div class="sanchez-font">
<div class="purple-text">
<p>O Problema Contrafactual</p>
</div>
</div>
<p>‚ÄúEntre as pessoas tratadas e curadas, seria mais comum curar caso elas n√£o tivessem sido tratadas?‚Äù</p>
<p><strong>Tradu√ß√£o pr√°tica:</strong> Precisamos criar um mundo contrafactual onde:</p>
<ul>
<li><p>Pessoas tratadas possam ser comparadas com n√£o-tratadas</p></li>
<li><p>Mas sem o vi√©s de sele√ß√£o do tratamento</p></li>
<li><p>Como se o tratamento fosse atribu√≠do aleatoriamente</p></li>
</ul>
<aside class="notes"><p>IPW responde: ‚ÄúComo seria o mundo se todos tivessem a mesma probabilidade de receber o tratamento?‚Äù Cria uma pseudopopula√ß√£o onde o tratamento √© independente das covari√°veis</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="ipw-mechanism" class="slide level2" data-menu-title="IPW"><h2></h2>
<p><span class="slide-title">Pondera√ß√£o pelo Inverso da Probabilidade de Tratamento</span></p>
<p><span class="custom-subtitle2">Recriando um estudo randomizado</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sanchez-font">
<div class="purple-text">
<p><strong>F√≥rmula dos Pesos</strong></p>
</div>
</div>
<p>Para cada indiv√≠duo <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[
w_I
\]</span></p>
<p><strong>Intui√ß√£o:</strong></p>
<ul>
<li><p>Peso alto: Indiv√≠duo ‚Äúimprov√°vel‚Äù em seu grupo</p></li>
<li><p>Peso baixo: Indiv√≠duo ‚Äúesperado‚Äù em seu grupo</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<caption>Exemplo de C√°lculo de Pesos</caption>
<thead><tr class="header">
<th style="text-align: center;">Indiv√≠duo</th>
<th style="text-align: center;">Grupo</th>
<th style="text-align: center;">PS</th>
<th style="text-align: center;">Peso</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">Tratado</td>
<td style="text-align: center;">0.9</td>
<td style="text-align: center;">1.11</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Tratado</td>
<td style="text-align: center;">0.7</td>
<td style="text-align: center;">1.43</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">Tratado</td>
<td style="text-align: center;">0.8</td>
<td style="text-align: center;">1.25</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">Controle</td>
<td style="text-align: center;">0.2</td>
<td style="text-align: center;">1.25</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">Controle</td>
<td style="text-align: center;">0.3</td>
<td style="text-align: center;">1.43</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">Controle</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: center;">1.11</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div>
<aside class="notes"><p>F√ìRMULA DOS PESOS: ‚ÄúA f√≥rmula mostra que os pesos dependem do grupo do indiv√≠duo:‚Äù ‚ÄúPara tratados: peso = 1 dividido pelo propensity score‚Äù ‚ÄúPara controles: peso = 1 dividido por (1 - propensity score)‚Äù</p>
<p>INTUI√á√ÉO DOS PESOS: Peso alto: ‚ÄúIndiv√≠duos com baixa probabilidade de estar no grupo onde est√£o‚Äù Peso baixo: ‚ÄúIndiv√≠duos com alta probabilidade de estar no grupo onde est√£o‚Äù</p>
<p>EXPLICA√á√ÉO DA TABELA: ‚ÄúNa tabela, vejam a rela√ß√£o entre PS e peso:‚Äù ‚ÄúPS alto (0.9) ‚Üí peso baixo (1.11)‚Äù ‚ÄúPS baixo (0.7) ‚Üí peso alto (1.43)‚Äù ‚ÄúO mesmo padr√£o vale para controles‚Äù</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section class="slide level2"><div class="fullscreen-colored">
<p>Aplica√ß√£o Final:<br>
Rede de mosquitos e Risco de Mal√°ria</p>
</div>
</section><section id="bibliotecas2" class="slide level2" data-menu-title="Revisando Bibliotecas"><h2></h2>
<p><span class="slide-title">Revisando Bibliotecas necess√°rias</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="fu">library</span>(ggdag)        <span class="co"># Constru√ß√£o de gr√°ficos</span></span>
<span id="cb31-2"><a href=""></a><span class="fu">library</span>(dagitty)      <span class="co"># Backdoor</span></span>
<span id="cb31-3"><a href=""></a><span class="fu">library</span>(tidyverse)    <span class="co"># Manipula√ß√£o de dados e visualiza√ß√£o</span></span>
<span id="cb31-4"><a href=""></a><span class="fu">library</span>(causalworkshop) <span class="co"># Dados simulados</span></span>
<span id="cb31-5"><a href=""></a><span class="fu">library</span>(broom)        <span class="co"># Tidy de modelos</span></span>
<span id="cb31-6"><a href=""></a><span class="fu">library</span>(propensity)   <span class="co"># C√°lculo de pesos IPW</span></span>
<span id="cb31-7"><a href=""></a><span class="fu">library</span>(halfmoon)     <span class="co"># Diagn√≥stico de balanceamento</span></span>
<span id="cb31-8"><a href=""></a><span class="fu">library</span>(rsample)      <span class="co"># Bootstrap</span></span>
<span id="cb31-9"><a href=""></a><span class="fu">library</span>(purrr)        <span class="co"># Itera√ß√£o</span></span>
<span id="cb31-10"><a href=""></a><span class="fu">library</span>(patchwork)    <span class="co"># Ajustar gr√°ficos</span></span>
<span id="cb31-11"><a href=""></a></span>
<span id="cb31-12"><a href=""></a><span class="co">#install.packages("pak")</span></span>
<span id="cb31-13"><a href=""></a><span class="co">#pak::pak("r-causal/causalworkshop")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="dados" class="slide level2" data-menu-title="Dados"><h2></h2>
<p><span class="slide-title">Nosso dataset</span></p>
<hr>
<p>Dados simulados criados pelo [Prof.&nbsp;Dr.&nbsp;Andrews Heiss]{https://www.andrewheiss.com/}</p>
<ul>
<li><p><strong>Objetivo:</strong> Verificar se mosquiteiros reduzem o risco de mal√°ria</p></li>
<li><p><strong>Amostra:</strong> 1.752 domic√≠lios (dados observacionais)</p></li>
<li><p><strong>Contexto:</strong> Estudo n√£o-experimental - uso de mosquiteiros √© por decis√£o pr√≥pria das fam√≠lias</p></li>
<li><p><strong>Vari√°veis dispon√≠veis:</strong> Fatores ambientais, de sa√∫de e caracter√≠sticas domiciliares</p></li>
</ul></section><section id="dados2" class="slide level2" data-menu-title="Dados"><h2></h2>
<p><span class="slide-title">Nosso dataset</span></p>
<hr>
<p><code>id</code>: Um identificador √∫nico para cada participante</p>
<p><code>net e net_num</code>: Uma vari√°vel bin√°ria que indica se o participante usou mosquiteiro (1) ou n√£o usou (0)</p>
<p><code>malaria_risk</code>: Escala de risco de mal√°ria que varia de 0 a 100</p>
<p><code>income</code>: Renda semanal, medida em d√≥lares</p>
<p><code>health</code>: Uma pontua√ß√£o de sa√∫de que varia de 0 a 100</p>
<p><code>household</code>: N√∫mero de pessoas que moram na resid√™ncia</p>
<p><code>eligible</code>: Uma vari√°vel bin√°ria que indica se a resid√™ncia √© eleg√≠vel para o programa de mosquiteiros gratuitos</p>
<p><code>temperature</code>: A temperatura m√©dia durante a noite, em graus Celsius</p>
<p><code>resistance</code>: Resist√™ncia a inseticidas dos mosquitos locais. Uma escala de 0 a 100, onde valores mais altos indicam maior resist√™ncia.</p>
<aside class="notes"><p>Because we‚Äôre using simulated data, we‚Äôll have direct access to an outcome variable that measures the likelihood of contracting malaria, something we wouldn‚Äôt likely have in real life. We‚Äôll stick with this measure because it allows us to more closely inspect the actual effect size, whereas, in practice, we would need to approximate the effect size through another proxy such as regular malaria testing among the population.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="dados3" class="slide level2" data-menu-title="Dados"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="co"># Distribui√ß√£o do risco de mal√°ria por uso de mosquiteiro</span></span>
<span id="cb32-2"><a href=""></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(malaria_risk, <span class="at">fill =</span> net)) <span class="sc">+</span></span>
<span id="cb32-4"><a href=""></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex1-1.png" width="960" class="r-stretch"></section><section id="dados4" class="slide level2" data-menu-title="Dados"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="co"># Diferen√ßa m√©dia simples</span></span>
<span id="cb33-2"><a href=""></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href=""></a>  <span class="fu">group_by</span>(net) <span class="sc">|&gt;</span> </span>
<span id="cb33-4"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">malaria_risk =</span> <span class="fu">mean</span>(malaria_risk))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  net   malaria_risk
  &lt;lgl&gt;        &lt;dbl&gt;
1 FALSE         43.9
2 TRUE          27.5</code></pre>
</div>
</div>
<aside class="notes"><p>Diferen√ßa m√©dia ing√™nua: quem usa mosquiteiro tem risco 16.4 pontos menor. Pode ter vi√©s por confundimento.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="dados5" class="slide level2" data-menu-title="Dados"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>malaria_dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb35-2"><a href=""></a>  malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> resistance,</span>
<span id="cb35-3"><a href=""></a>  net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> eligible <span class="sc">+</span> household,</span>
<span id="cb35-4"><a href=""></a>  eligible <span class="sc">~</span> income <span class="sc">+</span> household,</span>
<span id="cb35-5"><a href=""></a>  health <span class="sc">~</span> income,</span>
<span id="cb35-6"><a href=""></a>  <span class="at">exposure =</span> <span class="st">"net"</span>,</span>
<span id="cb35-7"><a href=""></a>  <span class="at">outcome =</span> <span class="st">"malaria_risk"</span>,</span>
<span id="cb35-8"><a href=""></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb35-9"><a href=""></a>    <span class="at">malaria_risk =</span> <span class="st">"Malaria Risk"</span>,</span>
<span id="cb35-10"><a href=""></a>    <span class="at">net =</span> <span class="st">"Net Use"</span>,</span>
<span id="cb35-11"><a href=""></a>    <span class="at">income =</span> <span class="st">"Income"</span>,</span>
<span id="cb35-12"><a href=""></a>    <span class="at">health =</span> <span class="st">"Health"</span>,</span>
<span id="cb35-13"><a href=""></a>    <span class="at">temperature =</span> <span class="st">"Temperature"</span>,</span>
<span id="cb35-14"><a href=""></a>    <span class="at">resistance =</span> <span class="st">"Resistance"</span>,</span>
<span id="cb35-15"><a href=""></a>    <span class="at">eligible =</span> <span class="st">"Eligible"</span>,</span>
<span id="cb35-16"><a href=""></a>    <span class="at">household =</span> <span class="st">"Household Size"</span></span>
<span id="cb35-17"><a href=""></a>  )</span>
<span id="cb35-18"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="grafo_malaria" class="slide level2" data-menu-title="Grafo do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a><span class="fu">ggdag</span>(malaria_dag, <span class="at">text =</span> <span class="cn">FALSE</span>, <span class="at">use_labels =</span> <span class="st">"label"</span>) <span class="sc">+</span></span>
<span id="cb36-2"><a href=""></a>  <span class="fu">theme_dag</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex4-1.png" width="960" class="r-stretch"><aside class="notes"><ol type="1">
<li>Determinantes do Risco de Mal√°ria (malaria_risk):</li>
</ol>
<ul>
<li>Uso de mosquiteiro (net) ‚Üí Reduz risco de mal√°ria</li>
<li>Renda (income) ‚Üí Afeta risco (pessoas mais ricas podem ter melhor acesso a cuidados)</li>
<li>Sa√∫de (health) ‚Üí Pessoas mais saud√°veis t√™m menor risco</li>
<li>Temperatura (temperature) ‚Üí Temperaturas mais altas podem aumentar transmiss√£o</li>
<li>Resist√™ncia (resistance) ‚Üí Resist√™ncia a inseticidas pode aumentar risco</li>
</ul>
<ol start="2" type="1">
<li>Determinantes do Uso de Mosquiteiro (net):</li>
</ol>
<ul>
<li>Renda (income) ‚Üí Pessoas mais ricas podem comprar mosquiteiros</li>
<li>Sa√∫de (health) ‚Üí Pessoas que se importam mais com sa√∫de podem usar mais</li>
<li>Temperatura (temperature) ‚Üí Temperaturas mais altas podem aumentar uso</li>
<li>Elegibilidade (eligible) ‚Üí Programa gratuito aumenta uso</li>
<li>Tamanho da fam√≠lia (household) ‚Üí Fam√≠lias maiores podem ter diferentes padr√µes de uso</li>
</ul>
<ol start="3" type="1">
<li>Determinantes da Elegibilidade (eligible):</li>
</ol>
<ul>
<li>Renda (income) ‚Üí Programas focam em pessoas de baixa renda</li>
<li>Tamanho da fam√≠lia (household) ‚Üí Fam√≠lias maiores podem ter prioridade</li>
</ul>
<ol start="4" type="1">
<li>Determinante da Sa√∫de (health):</li>
</ol>
<ul>
<li>Renda (income) ‚Üí Pessoas mais ricas t√™m melhor sa√∫de</li>
<li>Suposi√ß√µes de N√ÉO-Causalidade (aus√™ncia de setas)</li>
<li>Rela√ß√µes que N√ÉO existem no modelo:</li>
<li>Mosquiteiro ‚Üí Renda (uso n√£o afeta renda diretamente)</li>
<li>Risco de mal√°ria ‚Üí Sa√∫de (n√£o h√° feedback loop)</li>
<li>Temperatura ‚Üí Renda (temperatura n√£o afeta renda diretamente)</li>
<li>Resist√™ncia ‚Üí Uso de mosquiteiro (resist√™ncia n√£o afeta decis√£o de uso)</li>
<li>Tamanho da fam√≠lia ‚Üí Risco de mal√°ria (efeito apenas via uso de mosquiteiro)</li>
</ul><style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="modelo_ingenuo_malaria" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Modelo Ing√™nuo</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>modelo_naive <span class="ot">&lt;-</span> <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> net_data)</span>
<span id="cb37-2"><a href=""></a><span class="fu">tidy</span>(modelo_naive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)     43.9     0.377     116.  0       
2 netTRUE        -16.4     0.741     -22.1 1.10e-95</code></pre>
</div>
</div>
</section><section id="avaliacao_grafo_malaria" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo: Avalia√ß√£o</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="co"># Todos os conjuntos poss√≠veis</span></span>
<span id="cb39-2"><a href=""></a>adjustment_sets <span class="ot">&lt;-</span> dagitty<span class="sc">::</span><span class="fu">adjustmentSets</span>(</span>
<span id="cb39-3"><a href=""></a>  malaria_dag,</span>
<span id="cb39-4"><a href=""></a>  <span class="at">type =</span> <span class="st">"minimal"</span>,</span>
<span id="cb39-5"><a href=""></a>  <span class="at">effect =</span> <span class="st">"total"</span></span>
<span id="cb39-6"><a href=""></a>)</span>
<span id="cb39-7"><a href=""></a><span class="fu">print</span>(adjustment_sets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{ health, income, temperature }</code></pre>
</div>
</div>
<aside class="notes"><p>Conjunto m√≠nimo de ajuste: {health, income, temperature}. Suficiente para bloquear todos os caminhos de confundimento.</p>
<p>10 caminhos totais: 1 causal direto + 9 de confundimento. 2 j√° fechados naturalmente (colidores).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="avaliacao_grafo_malaria2" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo: Avalia√ß√£o</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a><span class="co"># Testar d-separa√ß√£o</span></span>
<span id="cb41-2"><a href=""></a>dsep_test <span class="ot">&lt;-</span> dagitty<span class="sc">::</span><span class="fu">dseparated</span>(</span>
<span id="cb41-3"><a href=""></a>  malaria_dag,</span>
<span id="cb41-4"><a href=""></a>  <span class="st">"net"</span>, </span>
<span id="cb41-5"><a href=""></a>  <span class="st">"malaria_risk"</span>,</span>
<span id="cb41-6"><a href=""></a>  <span class="fu">c</span>(<span class="st">"income"</span>, <span class="st">"health"</span>, <span class="st">"temperature"</span>)</span>
<span id="cb41-7"><a href=""></a>)</span>
<span id="cb41-8"><a href=""></a></span>
<span id="cb41-9"><a href=""></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"D-separated:"</span>, dsep_test))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "D-separated: FALSE"</code></pre>
</div>
</div>
</section><section id="avaliacao_grafo_malaria3" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo: Avalia√ß√£o</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>paths <span class="ot">&lt;-</span> dagitty<span class="sc">::</span><span class="fu">paths</span>(</span>
<span id="cb43-2"><a href=""></a>  malaria_dag,</span>
<span id="cb43-3"><a href=""></a>  <span class="at">from =</span> <span class="st">"net"</span>,</span>
<span id="cb43-4"><a href=""></a>  <span class="at">to =</span> <span class="st">"malaria_risk"</span></span>
<span id="cb43-5"><a href=""></a>)</span>
<span id="cb43-6"><a href=""></a></span>
<span id="cb43-7"><a href=""></a><span class="fu">print</span>(paths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$paths
 [1] "net -&gt; malaria_risk"                                             
 [2] "net &lt;- eligible &lt;- income -&gt; health -&gt; malaria_risk"             
 [3] "net &lt;- eligible &lt;- income -&gt; malaria_risk"                       
 [4] "net &lt;- health -&gt; malaria_risk"                                   
 [5] "net &lt;- health &lt;- income -&gt; malaria_risk"                         
 [6] "net &lt;- household -&gt; eligible &lt;- income -&gt; health -&gt; malaria_risk"
 [7] "net &lt;- household -&gt; eligible &lt;- income -&gt; malaria_risk"          
 [8] "net &lt;- income -&gt; health -&gt; malaria_risk"                         
 [9] "net &lt;- income -&gt; malaria_risk"                                   
[10] "net &lt;- temperature -&gt; malaria_risk"                              

$open
 [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
</section><section id="avaliacao_grafo_malaria4" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">O Grafo ap√≥s ajuste</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a><span class="co"># ANTES do ajuste</span></span>
<span id="cb45-2"><a href=""></a>antes <span class="ot">&lt;-</span> <span class="fu">ggdag_paths</span>(malaria_dag,</span>
<span id="cb45-3"><a href=""></a>                    <span class="at">from =</span> <span class="st">"net"</span>, </span>
<span id="cb45-4"><a href=""></a>                    <span class="at">to =</span> <span class="st">"malaria_risk"</span>,</span>
<span id="cb45-5"><a href=""></a>                    <span class="at">shadow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb45-6"><a href=""></a>                    <span class="at">text =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href=""></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span></span>
<span id="cb45-8"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ANTES: Todos os caminhos abertos"</span>)</span>
<span id="cb45-9"><a href=""></a></span>
<span id="cb45-10"><a href=""></a><span class="co"># DEPOIS do ajuste  </span></span>
<span id="cb45-11"><a href=""></a>depois <span class="ot">&lt;-</span> <span class="fu">ggdag_paths</span>(malaria_dag,</span>
<span id="cb45-12"><a href=""></a>                     <span class="at">from =</span> <span class="st">"net"</span>, </span>
<span id="cb45-13"><a href=""></a>                     <span class="at">to =</span> <span class="st">"malaria_risk"</span>,</span>
<span id="cb45-14"><a href=""></a>                     <span class="at">shadow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb45-15"><a href=""></a>                     <span class="at">text =</span> <span class="cn">FALSE</span>,</span>
<span id="cb45-16"><a href=""></a>                     <span class="at">adjust_for =</span> <span class="fu">c</span>(<span class="st">"health"</span>, <span class="st">"income"</span>, <span class="st">"temperature"</span>)) <span class="sc">+</span></span>
<span id="cb45-17"><a href=""></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span></span>
<span id="cb45-18"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"DEPOIS: Apenas caminho causal aberto"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="avaliacao_grafo_malaria5" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Caminhos abertos antes do ajuste</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a>antes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex9-1.png" width="960" class="r-stretch"></section><section id="avaliacao_grafo_malaria6" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Caminhos abertos depois do ajuste</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a>depois</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex10-1.png" width="960" class="r-stretch"></section><section id="avaliacao_grafo_malaria7" class="slide level2" data-menu-title="Avalia√ß√£o do Exemplo de Malaria"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Propensity Score</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a>propensity_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb48-2"><a href=""></a>  net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature,</span>
<span id="cb48-3"><a href=""></a>  <span class="at">data =</span> net_data,</span>
<span id="cb48-4"><a href=""></a>  <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb48-5"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="propensity_score" class="slide level2" data-menu-title="Propensity Score"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<span class="custom-subtitle2">Propensity Score</span>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="co"># C√°lculo dos pesos IPW (ATE)</span></span>
<span id="cb49-2"><a href=""></a>net_data_wts <span class="ot">&lt;-</span> propensity_model <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">data =</span> net_data, <span class="at">type.predict =</span> <span class="st">"response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">wts =</span> <span class="fu">wt_ate</span>(.fitted, net))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes"><p>Modelo de propensity score: prediz probabilidade de usar mosquiteiro baseado nos confundidores. Pesos IPW criam pseudo-popula√ß√£o balanceada.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="diagnostico_balanceamento" class="slide level2" data-menu-title="Diagn√≥stico do Balanceamento"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Balanceamento do Propensity Score</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a><span class="co"># Balanceamento do propensity score</span></span>
<span id="cb50-2"><a href=""></a><span class="fu">ggplot</span>(net_data_wts, <span class="fu">aes</span>(.fitted)) <span class="sc">+</span></span>
<span id="cb50-3"><a href=""></a>  <span class="fu">geom_mirror_histogram</span>(<span class="fu">aes</span>(<span class="at">fill =</span> net), <span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb50-4"><a href=""></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> abs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex13-1.png" width="960" class="r-stretch"></section><section id="balanceamento_ponderado" class="slide level2" data-menu-title="Balanceamento Ponderado"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Balanceamento Ap√≥s Pondera√ß√£o</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a><span class="co"># Balanceamento ponderado</span></span>
<span id="cb51-2"><a href=""></a><span class="fu">ggplot</span>(net_data_wts, <span class="fu">aes</span>(.fitted)) <span class="sc">+</span></span>
<span id="cb51-3"><a href=""></a>  <span class="fu">geom_mirror_histogram</span>(<span class="fu">aes</span>(<span class="at">group =</span> net), <span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb51-4"><a href=""></a>  <span class="fu">geom_mirror_histogram</span>(</span>
<span id="cb51-5"><a href=""></a>    <span class="fu">aes</span>(<span class="at">fill =</span> net, <span class="at">weight =</span> wts),</span>
<span id="cb51-6"><a href=""></a>    <span class="at">bins =</span> <span class="dv">50</span>, <span class="at">alpha =</span> .<span class="dv">5</span></span>
<span id="cb51-7"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb51-8"><a href=""></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> abs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex14-1.png" width="960" class="r-stretch"><aside class="notes"><p>Ap√≥s pondera√ß√£o IPW: distribui√ß√µes ficam muito similares entre grupos, indicando bom balanceamento.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="smd_plot" class="slide level2" data-menu-title="Diferen√ßas Padronizadas"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Love Plot - Diferen√ßas Padronizadas</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="co"># Diferen√ßas padronizadas de m√©dias (SMD)</span></span>
<span id="cb52-2"><a href=""></a>plot_df <span class="ot">&lt;-</span> <span class="fu">tidy_smd</span>(</span>
<span id="cb52-3"><a href=""></a>  net_data_wts,</span>
<span id="cb52-4"><a href=""></a>  <span class="fu">c</span>(income, health, temperature),</span>
<span id="cb52-5"><a href=""></a>  <span class="at">.group =</span> net,</span>
<span id="cb52-6"><a href=""></a>  <span class="at">.wts =</span> wts</span>
<span id="cb52-7"><a href=""></a>)</span>
<span id="cb52-8"><a href=""></a></span>
<span id="cb52-9"><a href=""></a><span class="fu">ggplot</span>(plot_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">abs</span>(smd), <span class="at">y =</span> variable, <span class="at">group =</span> method, <span class="at">color =</span> method)) <span class="sc">+</span></span>
<span id="cb52-10"><a href=""></a>  <span class="fu">geom_love</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex15-1.png" width="960" class="r-stretch"><aside class="notes"><p>Love plot: SMD &lt; 0.1 ap√≥s pondera√ß√£o indica bom balanceamento. IPW reduziu diferen√ßas entre grupos.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="distribuicao_pesos" class="slide level2" data-menu-title="Distribui√ß√£o dos Pesos"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Distribui√ß√£o dos Pesos IPW</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a><span class="co"># Distribui√ß√£o dos pesos</span></span>
<span id="cb53-2"><a href=""></a>net_data_wts <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(wts)) <span class="sc">+</span></span>
<span id="cb53-4"><a href=""></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"#CC79A7"</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/ex16-1.png" width="960" class="r-stretch"><aside class="notes"><p>Distribui√ß√£o dos pesos: sem valores extremos que possam destabilizar as estimativas.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="modelo_ipw" class="slide level2" data-menu-title="Modelo IPW"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Estimativa IPW do Efeito Causal</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="co"># Modelo ponderado</span></span>
<span id="cb54-2"><a href=""></a>modelo_ipw <span class="ot">&lt;-</span> <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> net_data_wts, <span class="at">weights =</span> wts)</span>
<span id="cb54-3"><a href=""></a><span class="fu">tidy</span>(modelo_ipw, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 7
  term        estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)     42.7     0.442      96.7 0            41.9      43.6
2 netTRUE        -12.5     0.624     -20.1 5.50e-81    -13.8     -11.3</code></pre>
</div>
</div>
<aside class="notes"><p>Efeito causal ajustado: -12.5 pontos de risco. Redu√ß√£o de 29% comparado ao modelo ing√™nuo (-16.4).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="bootstrap_funcao" class="slide level2" data-menu-title="Bootstrap IPW"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Fun√ß√£o Bootstrap para Intervalo de Confian√ßa</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="co"># Fun√ß√£o para bootstrap</span></span>
<span id="cb56-2"><a href=""></a>fit_ipw <span class="ot">&lt;-</span> <span class="cf">function</span>(.split, ...) {</span>
<span id="cb56-3"><a href=""></a>  .df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(.split)</span>
<span id="cb56-4"><a href=""></a>  </span>
<span id="cb56-5"><a href=""></a>  <span class="co"># Re-estimar tudo no bootstrap</span></span>
<span id="cb56-6"><a href=""></a>  propensity_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb56-7"><a href=""></a>    net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature,</span>
<span id="cb56-8"><a href=""></a>    <span class="at">data =</span> .df,</span>
<span id="cb56-9"><a href=""></a>    <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb56-10"><a href=""></a>  )</span>
<span id="cb56-11"><a href=""></a>  </span>
<span id="cb56-12"><a href=""></a>  .df <span class="ot">&lt;-</span> propensity_model <span class="sc">|&gt;</span></span>
<span id="cb56-13"><a href=""></a>    <span class="fu">augment</span>(<span class="at">type.predict =</span> <span class="st">"response"</span>, <span class="at">data =</span> .df) <span class="sc">|&gt;</span></span>
<span id="cb56-14"><a href=""></a>    <span class="fu">mutate</span>(<span class="at">wts =</span> <span class="fu">wt_ate</span>(.fitted, net))</span>
<span id="cb56-15"><a href=""></a>  </span>
<span id="cb56-16"><a href=""></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> .df, <span class="at">weights =</span> wts) <span class="sc">|&gt;</span></span>
<span id="cb56-17"><a href=""></a>    <span class="fu">tidy</span>()</span>
<span id="cb56-18"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes"><p>Bootstrap corretamente re-estima propensity scores em cada amostra, incorporando incerteza da estima√ß√£o dos pesos.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="aplicar_bootstrap" class="slide level2" data-menu-title="Aplicar Bootstrap"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Aplicando Bootstrap</span></p>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="co"># Aplicar bootstrap</span></span>
<span id="cb57-2"><a href=""></a>bootstrapped_net_data <span class="ot">&lt;-</span> <span class="fu">bootstraps</span>(net_data, <span class="at">times =</span> <span class="dv">1000</span>, <span class="at">apparent =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-3"><a href=""></a></span>
<span id="cb57-4"><a href=""></a>ipw_results <span class="ot">&lt;-</span> bootstrapped_net_data <span class="sc">|&gt;</span></span>
<span id="cb57-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">boot_fits =</span> <span class="fu">map</span>(splits, fit_ipw))</span>
<span id="cb57-6"><a href=""></a></span>
<span id="cb57-7"><a href=""></a><span class="co"># Intervalos de confian√ßa bootstrap</span></span>
<span id="cb57-8"><a href=""></a>boot_estimate <span class="ot">&lt;-</span> ipw_results <span class="sc">|&gt;</span></span>
<span id="cb57-9"><a href=""></a>  <span class="fu">int_t</span>(boot_fits) <span class="sc">|&gt;</span></span>
<span id="cb57-10"><a href=""></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>)</span>
<span id="cb57-11"><a href=""></a></span>
<span id="cb57-12"><a href=""></a><span class="fu">print</span>(boot_estimate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 6
  term    .lower .estimate .upper .alpha .method  
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    
1 netTRUE  -13.4     -12.6  -11.7   0.05 student-t</code></pre>
</div>
</div>
<aside class="notes"><p>1000 amostras bootstrap criam distribui√ß√£o emp√≠rica do efeito causal, incorporando toda a incerteza.</p>
<p>IC bootstrap corrigido: [-13.4, -11.7]. Mais conservador que IC ing√™nuo devido √† incerteza dos pesos.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside></section><section id="conclusao_exemplo" class="slide level2" data-menu-title="Conclus√£o do Exemplo"><h2></h2>
<p><span class="slide-title">Rede de mosquitos e Risco de Mal√°ria</span></p>
<p><span class="custom-subtitle2">Conclus√£o</span></p>
<hr>
<ul>
<li><p>Conclus√£o: Uso de mosquiteiros reduz significativamente o risco de mal√°ria</p></li>
<li><p>ATE estimado e Intervalo de confian√ßa: -12,5[-13.4 , -11.7 ] com 95% de confian√ßa</p></li>
<li><p>Vi√©s de confundimento: Modelo ing√™nuo superestimou o efeito em ~30%</p></li>
</ul></section><section class="slide level2"></section><section id="materias" class="slide level2" data-menu-title="Materiais"><h2></h2>
<p><span class="slide-title">Materiais</span></p>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img\book_of_why.jpg" style="width:70.0%"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img\causal_book.jpg" style="width:70.0%"></p>
</div></div>
</section><section class="slide level2"><p><span class="slide-title">Materiais</span></p>
<hr>

<img data-src="img\causal_inference_in_r.png" style="width:70.0%" class="r-stretch"><p><a href="https://www.r-causal.org/">Link</a></p>
</section><section id="referencias" class="slide level2" data-menu-title="Refer√™ncias"><h2></h2>
<p><span class="slide-title">Refer√™ncias</span></p>
<hr>
<p><strong><em>STERN, R. B.</em></strong> <em>Causality Book</em>. [S.l.]: GitHub, 2024. Dispon√≠vel em: <a href="https://github.com/rbstern/causality_book/blob/master/book.pdf" class="uri">https://github.com/rbstern/causality_book/blob/master/book.pdf</a>. Acesso em: 25 maio 2025.</p>
<p><strong><em>PEARL, Judea; GLYMOUR, Madelyn; JEWELL, Nicholas P.</em></strong> <em>Causal inference in statistics: a primer</em>. Chichester: Wiley, 2016.</p>
<p><strong>FINK, G. et al.&nbsp;Mosquito net use in early childhood and survival to adulthood in Tanzania.</strong>New England Journal of Medicine, 2022.</p>
<p><strong>LENGELER, C. Insecticide-treated bed nets and curtains for preventing malaria.</strong> Cochrane Database of Systematic Reviews, 2004.</p>
<p><strong>PRYCE, J.; RICHARDSON, M.; LENGELER, C. Insecticide-treated nets for preventing malaria.</strong> Cochrane Database of Systematic Reviews, 2018.</p>

</section>
</div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="index_files/libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script><script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script><script src="index_files/libs/revealjs/plugin/notes/notes.js"></script><script src="index_files/libs/revealjs/plugin/search/search.js"></script><script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script><script src="index_files/libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>